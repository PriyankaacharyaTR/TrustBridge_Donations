import { DollarSign, Calendar, User, Filter, Download, Search, CheckCircle, Clock, AlertCircle } from 'lucide-react';
import { useState } from 'react';










































































































































































































































































































































































export default FundUtilization;}  );    </div>      </div>        </div>          </div>            ))}              </div>                </div>                  </div>                    <p className="font-semibold text-blue-600 text-sm">{record.receiptNumber}</p>                    </p>                      Receipt                      <FileText className="w-4 h-4" />                    <p className="text-xs text-gray-600 mb-1 flex items-center gap-1">                  <div>                  </div>                    <p className="font-semibold text-gray-800 text-sm">{record.location}</p>                    </p>                      Location                      <TrendingUp className="w-4 h-4" />                    <p className="text-xs text-gray-600 mb-1 flex items-center gap-1">                  <div>                  </div>                    <p className="font-semibold text-gray-800">{record.beneficiaries}</p>                    </p>                      Beneficiaries                      <Users className="w-4 h-4" />                    <p className="text-xs text-gray-600 mb-1 flex items-center gap-1">                  <div>                  </div>                    <p className="font-semibold text-gray-800">{record.date}</p>                    </p>                      Date                      <Calendar className="w-4 h-4" />                    <p className="text-xs text-gray-600 mb-1 flex items-center gap-1">                  <div>                <div className="grid md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg">                </div>                  </div>                    <p className="text-xl font-bold text-gray-800">₹{record.amount.toLocaleString()}</p>                  <div className="text-right">                  </div>                    <p className="text-sm text-gray-600 mb-2">From: {record.donation}</p>                    </div>                      </span>                        {record.status}                      <span className="px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full">                      <h3 className="text-lg font-bold text-gray-800">{record.purpose}</h3>                      <CheckCircle className="w-5 h-5 text-green-600" />                    <div className="flex items-center gap-3 mb-2">                  <div className="flex-1">                <div className="flex items-start justify-between mb-4">              >                className="border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow"                key={record.id}              <div            {utilizationRecords.map((record) => (          <div className="space-y-4">          <h2 className="text-xl font-bold text-gray-800 mb-6">Utilization Records</h2>        <div className="bg-white rounded-xl shadow-lg p-6">        {/* Utilization Records */}        )}          </div>            </div>              </form>                </div>                  </button>                    Save Utilization                    <Save className="w-5 h-5" />                  >                    className="flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-green-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-green-700 transition-all flex items-center justify-center gap-2"                    type="submit"                  <button                  </button>                    Cancel                  >                    className="flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors"                    onClick={() => setShowAddForm(false)}                    type="button"                  <button                <div className="flex gap-3">                </div>                  ></textarea>                    required                    placeholder="Provide details about how the funds were utilized..."                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"                    rows={4}                    onChange={handleInputChange}                    value={formData.description}                    name="description"                  <textarea                  </label>                    Detailed Description *                  <label className="block text-sm font-medium text-gray-700 mb-2">                <div>                </div>                  </div>                    />                      required                      placeholder="REC-2025-XXX"                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"                      onChange={handleInputChange}                      value={formData.receiptNumber}                      name="receiptNumber"                      type="text"                    <input                    </label>                      Receipt Number *                    <label className="block text-sm font-medium text-gray-700 mb-2">                  <div>                  </div>                    />                      required                      placeholder="e.g., Village School, Raigad"                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"                      onChange={handleInputChange}                      value={formData.location}                      name="location"                      type="text"                    <input                    </label>                      Location *                    <label className="block text-sm font-medium text-gray-700 mb-2">                  <div>                  </div>                    />                      required                      placeholder="120"                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"                      onChange={handleInputChange}                      value={formData.beneficiaries}                      name="beneficiaries"                      type="number"                    <input                    </label>                      Beneficiaries Count *                    <label className="block text-sm font-medium text-gray-700 mb-2">                  <div>                  </div>                    />                      required                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"                      onChange={handleInputChange}                      value={formData.date}                      name="date"                      type="date"                    <input                    </label>                      Date *                    <label className="block text-sm font-medium text-gray-700 mb-2">                  <div>                  </div>                    />                      required                      placeholder="10000"                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"                      onChange={handleInputChange}                      value={formData.amount}                      name="amount"                      type="number"                    <input                    </label>                      Amount Utilized (₹) *                    <label className="block text-sm font-medium text-gray-700 mb-2">                  <div>                  </div>                    />                      required                      placeholder="e.g., Classroom Renovation"                      className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"                      onChange={handleInputChange}                      value={formData.purpose}                      name="purpose"                      type="text"                    <input                    </label>                      Purpose *                    <label className="block text-sm font-medium text-gray-700 mb-2">                  <div>                <div className="grid md:grid-cols-2 gap-4">                </div>                  </select>                    ))}                      </option>                        {d.donor} - ₹{d.amount.toLocaleString()} ({d.project})                      <option key={d.id} value={d.id}>                    {donations.map((d) => (                    <option value="">Choose a donation</option>                  >                    required                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"                    onChange={handleInputChange}                    value={formData.donationId}                    name="donationId"                  <select                  </label>                    Select Donation *                  <label className="block text-sm font-medium text-gray-700 mb-2">                <div>              <form onSubmit={handleSubmit} className="p-6 space-y-6">              </div>                </button>                  <X className="w-6 h-6" />                >                  className="p-2 hover:bg-white/20 rounded-lg transition-colors"                  onClick={() => setShowAddForm(false)}                <button                <h2 className="text-2xl font-bold">Add Utilization Details</h2>              <div className="sticky top-0 bg-gradient-to-r from-blue-600 to-green-600 text-white p-6 flex items-center justify-between">            <div className="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">          <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">        {showAddForm && (        {/* Add Utilization Form Modal */}        </div>          </div>            ))}              </div>                </div>                  </button>                    Add Details →                  >                    className="text-sm text-blue-600 hover:text-blue-700 font-medium mt-1"                    }}                      setFormData({ ...formData, donationId: donation.id.toString() });                      setShowAddForm(true);                    onClick={() => {                  <button                  <p className="text-lg font-bold text-gray-800">₹{donation.amount.toLocaleString()}</p>                <div className="text-right ml-4">                </div>                  </div>                    <span className="text-sm text-gray-600">{donation.utilized}%</span>                    </div>                      ></div>                        style={{ width: `${donation.utilized}%` }}                        className="bg-gradient-to-r from-orange-500 to-orange-600 h-2 rounded-full"                      <div                    <div className="flex-1 bg-gray-200 rounded-full h-2 max-w-xs">                  <div className="flex items-center gap-2 mt-2">                  <p className="text-sm text-gray-600">{donation.project}</p>                  <h3 className="font-semibold text-gray-800">{donation.donor}</h3>                <div className="flex-1">              >                className="p-4 bg-orange-50 border border-orange-200 rounded-lg flex items-center justify-between"                key={donation.id}              <div            {donations.filter(d => d.utilized < 100).map((donation) => (          <div className="space-y-3">          <h2 className="text-xl font-bold text-gray-800 mb-4">Donations Pending Utilization</h2>        <div className="bg-white rounded-xl shadow-lg p-6 mb-8">        {/* Donations Needing Utilization */}        </div>          </div>            </button>              Add Utilization              <Plus className="w-5 h-5" />            >              className="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-green-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-green-700 transition-all"              onClick={() => setShowAddForm(true)}            <button            </div>              <p className="text-gray-600">Track and manage how donations are being utilized</p>              <h1 className="text-3xl font-bold text-gray-800 mb-2">Fund Utilization Management</h1>            <div>          <div className="flex items-center justify-between">        <div className="mb-8">        {/* Header */}      <div className="container mx-auto px-4 py-8">    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50">  return (  };    });      receiptNumber: '',      description: '',      location: '',      beneficiaries: '',      date: '',      amount: '',      purpose: '',      donationId: '',    setFormData({    setShowAddForm(false);    alert('Utilization record added successfully! (UI Only)');    e.preventDefault();  const handleSubmit = (e: React.FormEvent) => {  };    });      [e.target.name]: e.target.value,      ...formData,    setFormData({  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {  ];    },      status: 'Completed',      receiptNumber: 'REC-2025-002',      location: 'Multiple Schools',      beneficiaries: 180,      date: '2025-12-15',      amount: 20000,      purpose: 'Books Distribution',      donation: 'Amit Patel - ₹20,000',      id: 2,    {    },      status: 'Completed',      receiptNumber: 'REC-2025-001',      location: 'Village School, Raigad',      beneficiaries: 120,      date: '2025-12-18',      amount: 11250,      purpose: 'Classroom Renovation',      donation: 'Rajesh Kumar - ₹25,000',      id: 1,    {  const utilizationRecords = [  // Dummy utilization records  ];    { id: 3, donor: 'Amit Patel', amount: 20000, project: 'Books and Materials', utilized: 100 },    { id: 2, donor: 'Priya Sharma', amount: 15000, project: 'Medical Equipment', utilized: 0 },    { id: 1, donor: 'Rajesh Kumar', amount: 25000, project: 'School Infrastructure', utilized: 45 },  const donations = [  // Dummy donation list  });    receiptNumber: '',    description: '',    location: '',    beneficiaries: '',    date: '',    amount: '',    purpose: '',    donationId: '',  const [formData, setFormData] = useState({  const [showAddForm, setShowAddForm] = useState(false);function FundUtilization({ onNavigate }: FundUtilizationProps) {}  donationId?: number;  onNavigate: (page: string) => void;interface FundUtilizationProps {
interface DonationRecordsProps {
  onNavigate: (page: string, donationId?: number) => void;
}

function DonationRecords({ onNavigate }: DonationRecordsProps) {
  const [filterStatus, setFilterStatus] = useState('all');
  const [filterProject, setFilterProject] = useState('all');
  const [searchTerm, setSearchTerm] = useState('');

  // Dummy donation records
  const donations = [
    {
      id: 1,
      donor: 'Rajesh Kumar',
      amount: 25000,
      date: '2025-12-20',
      project: 'School Infrastructure',
      utilized: 45,
      status: 'Partially Utilized',
      transactionId: 'TXN2025001',
    },
    {
      id: 2,
      donor: 'Priya Sharma',
      amount: 15000,
      date: '2025-12-19',
      project: 'Medical Equipment',
      utilized: 0,
      status: 'Pending Utilization',
      transactionId: 'TXN2025002',
    },
    {
      id: 3,
      donor: 'Amit Patel',
      amount: 20000,
      date: '2025-12-18',
      project: 'Books and Learning Materials',
      utilized: 100,
      status: 'Fully Utilized',
      transactionId: 'TXN2025003',
    },
    {
      id: 4,
      donor: 'Sunita Reddy',
      amount: 10000,
      date: '2025-12-17',
      project: 'Student Scholarships',
      utilized: 75,
      status: 'Partially Utilized',
      transactionId: 'TXN2025004',
    },
    {
      id: 5,
      donor: 'Vikram Singh',
      amount: 30000,
      date: '2025-12-15',
      project: 'School Infrastructure',
      utilized: 100,
      status: 'Fully Utilized',
      transactionId: 'TXN2025005',
    },
    {
      id: 6,
      donor: 'Meena Iyer',
      amount: 18000,
      date: '2025-12-12',
      project: 'Medical Equipment',
      utilized: 60,
      status: 'Partially Utilized',
      transactionId: 'TXN2025006',
    },
  ];

  const projects = ['all', 'School Infrastructure', 'Medical Equipment', 'Books and Learning Materials', 'Student Scholarships'];

  const filteredDonations = donations.filter((donation) => {
    const matchesSearch =
      donation.donor.toLowerCase().includes(searchTerm.toLowerCase()) ||
      donation.transactionId.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesStatus =
      filterStatus === 'all' ||
      (filterStatus === 'utilized' && donation.utilized === 100) ||
      (filterStatus === 'partial' && donation.utilized > 0 && donation.utilized < 100) ||
      (filterStatus === 'pending' && donation.utilized === 0);
    const matchesProject = filterProject === 'all' || donation.project === filterProject;
    return matchesSearch && matchesStatus && matchesProject;
  });

  const totalAmount = donations.reduce((sum, d) => sum + d.amount, 0);
  const utilizedAmount = donations.reduce((sum, d) => sum + (d.amount * d.utilized) / 100, 0);

  const getStatusIcon = (status: string) => {
    switch (status) {
      case 'Fully Utilized':
        return <CheckCircle className="w-5 h-5 text-green-600" />;
      case 'Partially Utilized':
        return <Clock className="w-5 h-5 text-blue-600" />;
      default:
        return <AlertCircle className="w-5 h-5 text-orange-600" />;
    }
  };

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'Fully Utilized':
        return 'bg-green-100 text-green-700';
      case 'Partially Utilized':
        return 'bg-blue-100 text-blue-700';
      default:
        return 'bg-orange-100 text-orange-700';
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50">
      <div className="container mx-auto px-4 py-8">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-gray-800 mb-2">Donation Records</h1>
          <p className="text-gray-600">Manage and track all received donations</p>
        </div>

        {/* Summary Cards */}
        <div className="grid md:grid-cols-3 gap-6 mb-8">
          <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500">
            <div className="flex items-center gap-3 mb-2">
              <div className="p-2 bg-blue-100 rounded-lg">
                <DollarSign className="w-5 h-5 text-blue-600" />
              </div>
              <h3 className="text-sm text-gray-600">Total Received</h3>
            </div>
            <p className="text-2xl font-bold text-gray-800">₹{totalAmount.toLocaleString()}</p>
          </div>

          <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500">
            <div className="flex items-center gap-3 mb-2">
              <div className="p-2 bg-green-100 rounded-lg">
                <CheckCircle className="w-5 h-5 text-green-600" />
              </div>
              <h3 className="text-sm text-gray-600">Total Utilized</h3>
            </div>
            <p className="text-2xl font-bold text-gray-800">
              ₹{utilizedAmount.toLocaleString()}
            </p>
            <p className="text-sm text-gray-600 mt-1">
              {((utilizedAmount / totalAmount) * 100).toFixed(1)}% of total
            </p>
          </div>

          <div className="bg-white rounded-xl shadow-lg p-6 border-l-4 border-orange-500">
            <div className="flex items-center gap-3 mb-2">
              <div className="p-2 bg-orange-100 rounded-lg">
                <AlertCircle className="w-5 h-5 text-orange-600" />
              </div>
              <h3 className="text-sm text-gray-600">Pending Utilization</h3>
            </div>
            <p className="text-2xl font-bold text-gray-800">
              {donations.filter(d => d.utilized < 100).length}
            </p>
          </div>
        </div>

        {/* Filters */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-8">
          <div className="grid md:grid-cols-3 gap-4 mb-4">
            <div className="relative">
              <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
              <input
                type="text"
                placeholder="Search by donor or transaction ID..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
            </div>

            <div className="relative">
              <Filter className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
              <select
                value={filterStatus}
                onChange={(e) => setFilterStatus(e.target.value)}
                className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none"
              >
                <option value="all">All Status</option>
                <option value="utilized">Fully Utilized</option>
                <option value="partial">Partially Utilized</option>
                <option value="pending">Pending</option>
              </select>
            </div>

            <div className="relative">
              <Filter className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
              <select
                value={filterProject}
                onChange={(e) => setFilterProject(e.target.value)}
                className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none"
              >
                {projects.map((project) => (
                  <option key={project} value={project}>
                    {project === 'all' ? 'All Projects' : project}
                  </option>
                ))}
              </select>
            </div>
          </div>

          <div className="flex items-center justify-between">
            <p className="text-sm text-gray-600">
              Showing <span className="font-semibold">{filteredDonations.length}</span> of{' '}
              <span className="font-semibold">{donations.length}</span> donations
            </p>
            <button className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
              <Download className="w-5 h-5" />
              Export
            </button>
          </div>
        </div>

        {/* Donations Table */}
        <div className="bg-white rounded-xl shadow-lg overflow-hidden">
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead className="bg-gradient-to-r from-blue-600 to-green-600 text-white">
                <tr>
                  <th className="px-6 py-4 text-left text-sm font-semibold">Transaction ID</th>
                  <th className="px-6 py-4 text-left text-sm font-semibold">Donor</th>
                  <th className="px-6 py-4 text-left text-sm font-semibold">Date</th>
                  <th className="px-6 py-4 text-right text-sm font-semibold">Amount</th>
                  <th className="px-6 py-4 text-left text-sm font-semibold">Project</th>
                  <th className="px-6 py-4 text-center text-sm font-semibold">Utilization</th>
                  <th className="px-6 py-4 text-center text-sm font-semibold">Status</th>
                  <th className="px-6 py-4 text-center text-sm font-semibold">Action</th>
                </tr>
              </thead>
              <tbody className="divide-y divide-gray-200">
                {filteredDonations.map((donation) => (
                  <tr
                    key={donation.id}
                    className="hover:bg-gray-50 transition-colors"
                  >
                    <td className="px-6 py-4">
                      <span className="text-sm font-medium text-gray-800">
                        {donation.transactionId}
                      </span>
                    </td>
                    <td className="px-6 py-4">
                      <div className="flex items-center gap-2">
                        <User className="w-4 h-4 text-gray-400" />
                        <span className="text-sm font-medium text-gray-800">{donation.donor}</span>
                      </div>
                    </td>
                    <td className="px-6 py-4">
                      <div className="flex items-center gap-2 text-sm text-gray-600">
                        <Calendar className="w-4 h-4" />
                        {donation.date}
                      </div>
                    </td>
                    <td className="px-6 py-4 text-right">
                      <span className="text-sm font-bold text-gray-800">
                        ₹{donation.amount.toLocaleString()}
                      </span>
                    </td>
                    <td className="px-6 py-4">
                      <span className="text-sm text-gray-700">{donation.project}</span>
                    </td>
                    <td className="px-6 py-4">
                      <div className="flex flex-col items-center">
                        <span className="text-sm font-semibold text-gray-800 mb-1">
                          {donation.utilized}%
                        </span>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                          <div
                            className={`h-2 rounded-full ${
                              donation.utilized === 100
                                ? 'bg-gradient-to-r from-green-500 to-green-600'
                                : donation.utilized > 0
                                ? 'bg-gradient-to-r from-blue-500 to-blue-600'
                                : 'bg-gray-300'
                            }`}
                            style={{ width: `${donation.utilized}%` }}
                          ></div>
                        </div>
                      </div>
                    </td>
                    <td className="px-6 py-4">
                      <div className="flex items-center justify-center gap-2">
                        {getStatusIcon(donation.status)}
                        <span
                          className={`px-3 py-1 rounded-full text-xs font-semibold ${getStatusColor(
                            donation.status
                          )}`}
                        >
                          {donation.status}
                        </span>
                      </div>
                    </td>
                    <td className="px-6 py-4 text-center">
                      <button
                        onClick={() => onNavigate('ngo-utilization', donation.id)}
                        className="text-blue-600 hover:text-blue-700 font-medium text-sm"
                      >
                        {donation.utilized < 100 ? 'Add Utilization' : 'View Details'} →
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  );
}

export default DonationRecords;
